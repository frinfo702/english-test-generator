---
name: english-question-generator
description: >
  TOEFL iBT (2026年以降)やTOEICの問題を生成するスキル。
  ユーザーが「TOEFL対策」「TOEFL問題作って」「Readingの練習」「Writingの練習」「Speakingの練習」
  「TOEFL practice」「TOEFLの問題」「新形式TOEFL」「アダプティブTOEFL」「TOEICの問題を作って」「part5の問題を作って」などと言ったときにトリガーする。
  セクション指定がなければどのセクションか確認する。難易度指定がなければModule 1（標準）レベルで生成する。
  Listeningは音声が必要なため本スキルの対象外。
---

# TOEFL iBT 2026 新形式 対策問題ジェネレーター

## 概要

2026年1月21日に導入されたTOEFL iBT新形式および TOEIC Reading に準拠した対策問題を生成する。

**問題JSONを新規作成・追加するときは、必ず先に `references/question-schemas.md` を読むこと。**
全タスクのJSONスキーマ・フィールド仕様・保存先ディレクトリ・ファイル命名規則がすべて記載されている。

## ワークフロー

1. ユーザーのリクエストからセクション（R/W/S）とタスクタイプを特定する
2. 指定がなければ ask_user_input でセクションとタスクタイプを確認する
3. 難易度を確認する（Module 1 標準 / Module 2 Easy / Module 2 Hard）
4. `references/format-spec.md` を読み込み、該当タスクの仕様を確認する
5. `scripts/make-question.sh` で雛形JSONファイルを生成し、index.json を自動更新する
6. 生成された雛形の TODO を実際の問題内容に置き換える
7. 解答・解説を別途提供する

## 問題JSONファイルの作成スクリプト

**問題JSONの新規追加には必ず `scripts/make-question.sh` を使うこと。**
連番ファイル名の決定と `index.json` の更新を自動で行う。

```bash
./scripts/make-question.sh <task>
```

### task 一覧

| task パス                      | 対応タスク                       |
| ------------------------------ | -------------------------------- |
| `toefl/reading/complete-words` | Complete the Words               |
| `toefl/reading/daily-life`     | Read in Daily Life               |
| `toefl/reading/academic`       | Read an Academic Passage         |
| `toefl/writing/build-sentence` | Build a Sentence                 |
| `toefl/writing/email`          | Write an Email                   |
| `toefl/writing/discussion`     | Write for an Academic Discussion |
| `toefl/speaking/listen-repeat` | Listen and Repeat                |
| `toefl/speaking/interview`     | Take an Interview                |
| `toeic/part5`                  | TOEIC Part 5                     |
| `toeic/part6`                  | TOEIC Part 6                     |
| `toeic/part7`                  | TOEIC Part 7                     |

### 使用例

```bash
./scripts/make-question.sh toeic/part5
# → public/questions/toeic/part5/001.json を生成、index.json を更新

./scripts/make-question.sh toefl/reading/daily-life
# → public/questions/toefl/reading/daily-life/NNN.json を生成
```

スクリプト実行後、生成されたJSONファイル内の `TODO` を実際の問題内容に置き換える。

## セクション別タスク一覧

### Reading（R）

| タスク                   | 概要                                      | 問題数目安 |
| ------------------------ | ----------------------------------------- | ---------- |
| Complete the Words       | 学術パラグラフの単語補完                  | 10問       |
| Read in Daily Life       | 日常テキスト読解（SNS/メール/メニュー等） | 2-3問      |
| Read an Academic Passage | 短縮版学術パッセージ（約200語＋5問）      | 5問        |

### Writing（W）

| タスク                           | 概要                                 | 制限           |
| -------------------------------- | ------------------------------------ | -------------- |
| Build a Sentence                 | 語句並べ替えで文を構築               | 10問           |
| Write an Email                   | シナリオに基づきメール作成           | 7分            |
| Write for an Academic Discussion | 教授の質問＋学生2名の意見→自分の意見 | 10分/100語以上 |

### Speaking（S）

| タスク            | 概要                                     | 時間 |
| ----------------- | ---------------------------------------- | ---- |
| Listen and Repeat | 文を読み上げて復唱（テキスト提示で代替） | 7問  |
| Take an Interview | トピックに即答（準備時間なし、各45秒）   | 4問  |

## 問題生成ガイドライン

### 学術トピック

以下の分野からバランスよく出題する：

- 自然科学（生物学、地質学、天文学、化学、物理学）
- 社会科学（心理学、社会学、経済学、人類学）
- 人文学（歴史学、美術史、文学、哲学、言語学）
- 応用科学（環境科学、工学、医学、コンピュータサイエンス）

### 難易度調整

- **Module 1（標準）**: CEFR B1-B2相当。基本的な学術語彙、明確な構造の文章
- **Module 2 Easy**: CEFR A2-B1相当。日常的な語彙中心、短い文章
- **Module 2 Hard**: CEFR B2-C1相当。高度な学術語彙、複雑な構文、抽象的議論

### 出力形式

問題はインタラクティブなReactアーティファクト（.jsx）として生成する。以下の要素を含める：

1. **問題表示**: 本文・設問・選択肢を見やすくレイアウト
2. **タイマー**（Writing/Speakingタスク）: カウントダウンタイマーを表示
3. **回答入力**: 選択式はクリック、記述式はテキストエリア
4. **即時フィードバック**: 回答後に正誤・解説を表示（選択式の場合）
5. **スコア表示**: セッション終了時に正答率とバンドスコア目安を表示

### デザイン仕様

- 背景: 白ベース、アクセントカラー #0071BC（ETS TOEFL ブルー）
- フォント: system-ui、本文16px
- レスポンシブ対応
- プログレスバーで進行状況を表示

## タスク別 問題生成の詳細指示

### R: Complete the Words

- 70〜100語の学術的パラグラフを生成する
- 10個の単語の後半部分を「\_\_\_」に置き換える
- 各単語の最初の2〜3文字は残す（ヒントとして機能）
- 文脈から一意に特定できる単語を選ぶ（複数正解が成立しないよう注意）
- 単語の品詞・難易度をバランスよく配分する

**生成例:**

```
The process of photosynth___ allows plants to conv___ sunlight into
chem___ energy. This remark___ mechanism has been stud___ extensively
by biol___ for over two centur___.
```

### R: Read in Daily Life（アダプティブ対応）

このタスクは本番同様の **マルチステージ・アダプティブ方式** で出題する。
Module 1の正答率に応じてModule 2の難易度が自動分岐する。

#### アダプティブ・フロー

```
┌─────────────────────────────────────────────────┐
│  Module 1（標準難易度）: 4〜6問                    │
│  テキスト2本 × 各2〜3問                           │
│  → 全問回答後、正答率を自動計算                     │
├─────────────────────────────────────────────────┤
│  正答率 ≥ 70%  → Module 2 Hard に分岐             │
│  正答率 < 70%   → Module 2 Easy に分岐             │
└─────────────────────────────────────────────────┘

Module 2 Hard（高難易度）: 4〜6問
  → バンドスコア上限なし（5.0〜6.0が狙える）

Module 2 Easy（基礎難易度）: 4〜6問
  → バンドスコア上限あり（最大約4.0）
```

#### 共通ルール

- 15〜150語の非学術テキストを生成する
- 各テキストに2〜3問の4択問題を付与する
- 推論問題（implied meaning）を各モジュール最低1問含める
- ダミー問題はこのタスクに含まれる可能性がある（生成時は全問採点対象でOK）

#### Module 1（標準）の生成仕様

- テキスト種別: メール、SNS投稿、イベントポスター、掲示板の告知
- 語彙レベル: CEFR B1-B2（一般的な日常・キャンパス語彙）
- テキスト長: 50〜120語
- 設問: 事実確認1問 + 推論1問（＋任意で目的把握1問）
- 選択肢の紛らわしさ: 中程度（明確なディストラクター2つ + やや紛らわしい1つ）

#### Module 2 Hard の生成仕様（正答率 ≥ 70% で分岐）

- テキスト種別: 複数人のチャットスレッド、長めのメール（返信チェーン）、
  契約条件・ポリシー文書の抜粋、学術イベントの複雑なスケジュール表
- 語彙レベル: CEFR B2-C1（やや専門的・フォーマルな表現を含む）
- テキスト長: 100〜150語
- 設問: 推論2問 + 態度・意図把握1問（暗示的な意味を読み取る力を重視）
- 選択肢の紛らわしさ: 高（4つの選択肢のうち2つが非常に近い意味）
- 特徴: テキストに明示されていない情報を論理的に導く問題を多く含む

#### Module 2 Easy の生成仕様（正答率 < 70% で分岐）

- テキスト種別: レストランメニュー、シンプルなSNS投稿、レシート、
  短い掲示（開館時間、連絡先等）、友人間のテキストメッセージ
- 語彙レベル: CEFR A2-B1（基礎的な日常語彙、短い文）
- テキスト長: 15〜80語
- 設問: 事実確認2問 + 簡易推論1問（テキストにほぼ直接書かれている情報）
- 選択肢の紛らわしさ: 低（正解が比較的明確、明らかな誤答が2つ以上）
- 特徴: テキストの情報をそのまま読み取れば正解できる問題が中心

#### Reactアーティファクト実装時のアダプティブUI要件

1. **Module 1 → Module 2 の自動遷移**:
   - Module 1の全問回答後、正答率を計算して state で管理する
   - 分岐結果をユーザーに明示する
     例: "Module 1 完了！正答率 80% → Module 2 (Hard) に進みます"
   - 分岐アニメーション（フェードイン等）で区切りを明確にする

2. **プログレス表示**:

   ```
   [Module 1: ████████░░ 4/6] → [分岐判定] → [Module 2: ░░░░░░░░░░ 0/6]
   ```

3. **最終スコア算出**:
   - Module 2 Hard を通過した場合: 両モジュール合算の正答率 → バンドスコア換算（上限なし）
   - Module 2 Easy を通過した場合: 両モジュール合算の正答率 → バンドスコア換算（上限4.0）
   - バンドスコア目安表示:
     ```
     Hard ルート: 90%以上→5.5-6.0 / 75-89%→4.5-5.0 / 60-74%→3.5-4.0
     Easy ルート: 90%以上→3.5-4.0 / 75-89%→3.0-3.5 / 60-74%→2.5-3.0
     ```

4. **結果画面に分岐情報を表示**:
   - どちらのルートに分岐したか
   - Module別の正答率内訳
   - 改善アドバイス（Hardルートで低正答率→語彙力強化、Easy→基礎読解力）

### R: Read an Academic Passage

- 約200語の学術パッセージを生成する（従来の700語から大幅短縮に注意）
- 5問の4択問題を付与する
- 問題タイプ: 語彙、詳細理解、推論、目的、要約から組み合わせる
- パラグラフは2〜3段落構成

### W: Build a Sentence

- 質問または文章（reference）を1つ提示し、それへの回答文を1文生成する
- 回答文は原則単語単位で分割してシャッフルする（重複語の曖昧さ回避時のみ最小限の連結を許容）
- ドラッグ＆ドロップまたはクリック式で並べ替えるUIを実装する
- 10問セットで生成する

### W: Write an Email

- シナリオを提示する（例: 教授へのオフィスアワー変更依頼、
  グループプロジェクトメンバーへの進捗確認、図書館への資料リクエスト等）
- 7分のカウントダウンタイマーを表示する
- テキストエリアに入力させる
- 提出後、模範解答と採点基準（内容・構成・言語使用）を表示する

### W: Write for an Academic Discussion

- 教授の質問（2〜3文）と学生2名の意見（各3〜4文）を生成する
- トピックは学際的な議論テーマとする
- 10分のカウントダウンタイマーを表示する
- テキストエリア（語数カウント付き）に入力させる
- 提出後、模範解答と評価ポイントを表示する

### S: Listen and Repeat

- 本来は音声を聞いて復唱するタスクだが、テキスト表示で代替する
- キャンパス生活や日常に関する7つの文を生成する
- 各文は8〜15語程度
- 文を一定時間表示後に非表示にし、ユーザーにタイピングで再現させる
- 正解との差分をハイライト表示する

### S: Take an Interview

- 4つのインタビュー質問を生成する
- トピック: 個人的経験、意見、仮定的状況、比較・選択
- 準備時間なし（即座に回答開始）
- 45秒のカウントダウンタイマーを表示する
- テキスト入力で代替（実際のテストではスピーキング）
- 提出後、模範解答と評価ポイント（内容・流暢さ・発音は対象外）を表示する

## 複数問題セットの生成

ユーザーが「ミニテスト」「フルセット」等をリクエストした場合：

- **ミニセット**: 各セクションから1タスクタイプずつ（計3問セット）
- **セクション別フルセット**: 指定セクションの全タスクタイプを通しで実施
- **模擬テスト**: R→W→Sの順に全タスクを実施（約45分想定）

## 注意事項

- 著作権のある文章は使用しない。全て独自に生成する
- 学術的に正確な内容を生成する（事実誤認を避ける）
- 多様なアクセント対応はListeningの範囲なので、R/W/Sでは英米いずれかの標準的な英語を使用する
- 回答の選択肢は妥当な誤答（ディストラクター）を含め、消去法で解ける安易な設問を避ける
